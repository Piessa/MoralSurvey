<!DOCTYPE html>
<html lang="en">
<!--   Copyright (c) 2025 Alberto Roggero
       License at: https://raw.githubusercontent.com/Piessa/MoralSurvey/refs/heads/main/LICENSE.md
-->
    <head>
        <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Moral Journey Survey</title>
        <link rel="icon" href="https://i.seadn.io/gae/KTMWrPShvGnUrsdK6DtFEbgUFTC0CX8ZOKPNAQ6UuamoDKtrNrMUYozamRN_NAGnwV1qhAkMbh3cXX9jmzhs7PNEvM9qjMYfWCTY-iU?auto=format&dpr=1&w=1000" type="image/avif">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100..900&display=swap" rel="stylesheet">
        <script type="importmap">
            {
              "imports": {
                "@material/web/": "https://esm.run/@material/web/"
              }
            }
        </script>
        <script type="module">
            import '@material/web/button/filled-button.js';
            import '@material/web/progress/circular-progress.js';
    </script>
    <script>
        const test = false;
    </script>
    <style>
        :root {
            --md-sys-color-primary: #caeea6;               /*  #334478;  */
            --md-sys-color-on-primary: #334e18;            /*  #dbe1ff;  */
            --md-sys-color-background: #dbe7c8;            /*  #dbe1ff;  */
            --md-sys-color-surface: #1e4e4c;               /*  #ffd6f8;  */
            --md-sys-color-on-surface: #bbece9;            /*  #5a3d58;  */
            --md-circular-progress-active-indicator-color: var(--md-sys-color-on-surface);
            --md-sys-shape-corner-extra-large: 28px;
            --md-sys-shape-corner-medium: 16px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: var(--md-sys-color-background);
            color: var(--md-sys-color-on-surface);
        }

        .container {
            background: var(--md-sys-color-surface);
            border-radius: var(--md-sys-shape-corner-extra-large);
            padding: 24px;
            margin-top: -10vh; /* Moves it higher */
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            max-width: 600px;
            width: 70%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 1;
            /* elevation: 3; */
        }

        h1 {
            margin-bottom: 24px;
            font-size: 2rem;
            color: var(--md-sys-color-primary);
        }

        h2 {
            margin-bottom: 16px;
            font-size: 1.2rem;
            color: var(--md-sys-color-surface);
        }

        a {
            color: var(--md-sys-color-primary);
        }

        .question {
            display: none;
            animation: fadeIn 400ms cubic-bezier(0.2, 0, 0, 1) both;
        }

        .question.welcome {
            display: none;
            animation: none;
        }

        .question.active {
            display: block;
        }

        label {
            display: block;
            margin: 16px 0;
            font-size: 1rem;
            color: var(--md-sys-color-on-surface);
        }

        md-filled-button {
            margin-top: 10px;
            margin-left: 5px;
            font-size: 1rem;
            --md-filled-button-container-color: var(--md-sys-color-primary);
            --md-filled-button-label-text-color: var(--md-sys-color-on-primary);
        }

        .thank-you {
            display: none;
            animation: fadeIn 0.7s ease;
            font-size: 1.2rem;
            color: var(--md-sys-color-on-surface);
        }

        .loading-screen {
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loading-screen p {
            margin-top: 16px;
            font-size: 1.2rem;
            color: var(--md-sys-color-on-surface);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(40px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .img {
            width: 40px;
            height: 40px;
        }

        @media (min-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            h2 {
                font-size: 1.5rem;
            }
            label {
                font-size: 1.4rem;
            }
        }

        @media (min-width: 1024px) {
            .container {
                padding: 32px;
                width: 60%;
            }
            h1 {
                font-size: 2.2rem;
            }
            h2 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>

    </head>
    <body>
    <div class="container">
        <form id="survey-form">
            <div class="question welcome active" data-id="lang">
                <h1>A Moral Journey</h1>
                <md-filled-button type="button" data-value="en">English</md-filled-button>
                <md-filled-button type="button" data-value="it">Italiano</md-filled-button>
           </div>

             <!-- Introductive Screens -->
             <div class="question" data-id="inter0">
                <label>Hello there and welcome. Thank you for joining :)</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter0_it">
                <label>Ciao, benvenutə. Grazie per essere qui :)</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <div class="question" data-id="inter1">
                <label>What is this for?</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter1_it">
                <label>A cosa serve?</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <div class="question" data-id="inter2">
                <label>What follows aims at having you reflect on what your principles are (if you have any) and on how validly are you reasoning to follow those principles.</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter2_it">
                <label>Quello che segue ha lo scopo di farti riflettere sui tuoi principi (se ne hai) e su quanto validamente stai ragionando per seguirli.</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <div class="question" data-id="inter3">
                <label>This means that acting morally will be henceforth defined as acting following sound reasoning rooted in one's morality. (No, morality is not universal)</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter3_it">
                <label>Questo significa che agire moralmente sarà d'ora in poi definito come agire seguendo un ragionamento valido radicato nella propria moralità. (No, la moralità non è universale)</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <div class="question" data-id="inter4">
                <label>Just to be on the same page..</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter4_it">
                <label>Per essere sulla stessa lunghezza d'onda..</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <div class="question" data-id="inter5">
                <label>Acting morally requires two things:<br><br>

                    - A set of moral principles (or a single principle ruling everything)<br>
                    - Adequate (sound) moral reasoning to follow those (or that) principles.</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter5_it">
                <label>Agire moralmente richiede due cose:<br><br>

                    - Un insieme di principi morali (o un singolo principio che governa tutto)<br>
                    - Un ragionamento morale adeguato (valido) per seguire quei (o quel) principio.</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <div class="question" data-id="inter6">
                <label>We will very briefly go through both of them. But first..</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter6_it">
                <label>Esamineremo molto brevemente entrambi. Ma prima..</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>
            

            <!-- Question 1 -->
            <div class="question" data-id="q1">
                <label>Do you even care about acting morally?</label>
                <md-filled-button type="button" data-value="yes">Yes</md-filled-button>
                <md-filled-button type="button" data-value="no">No</md-filled-button>
            </div>

            <div class="question" data-id="q1_it">
                <label>È importante per te agire moralmente?</label>
                <md-filled-button type="button" data-value="yes">Si</md-filled-button>
                <md-filled-button type="button" data-value="no">No</md-filled-button>
            </div>

            <!-- Question 2 -->
            <div class="question" data-id="q2">
                <label>Are you confident that all of your moral actions, decisions, and opinions reflect your idea of morality, and could you backtrace the moral reasoning behind them to the roots of your morality?</label>
                <md-filled-button type="button" data-value="yes">Yes</md-filled-button>
                <md-filled-button type="button" data-value="no">No</md-filled-button>
            </div>

            <div class="question" data-id="q2_it">
                <label>Sei sicuro che tutte le tue azioni, decisioni e opinioni morali riflettano la tua idea di moralità, e potresti risalire al ragionamento morale che le ha generate?</label>
                <md-filled-button type="button" data-value="yes">Si</md-filled-button>
                <md-filled-button type="button" data-value="no">No</md-filled-button>
            </div>

            <!-- Intermediate Screen 1 -->
            <div class="question" data-id="inter7">
                <label>Now that the lame ones are out along with the goat's let's begin.</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter7_it">
                <label>Ora che i deboli sono fuori insieme ai goat iniziamo.</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <!-- Question 3 -->
            <div class="question" data-id="q3">
                <label>Would you consider your moral to be more..</label>
                <md-filled-button type="button" data-value="deontological">Deontological</md-filled-button><br>
                <md-filled-button type="button" data-value="consequentialist">Consequentialist</md-filled-button><br>
                <md-filled-button type="button" data-value="egoist">Egoist</md-filled-button><br>
                <md-filled-button type="button" data-value="dunno">I'm not sure or<br>I don't know what they mean</md-filled-button>
            </div>

            <div class="question" data-id="q3_it">
                <label>Considereresti la tua morale più..</label>
                <md-filled-button type="button" data-value="deontological">Deontologica</md-filled-button><br>
                <md-filled-button type="button" data-value="consequentialist">Consequenzialista</md-filled-button><br>
                <md-filled-button type="button" data-value="egoist">Egoista</md-filled-button><br>
                <md-filled-button type="button" data-value="dunno">Non sono sicuro o<br>non so cosa significhino</md-filled-button>
            </div>

            <!-- Intermediate Screen 2 -->
            <div class="question" data-id="inter8">
                <label>
                    <span style="font-size: 1.3em;"><strong>DEONTOLOGY:<br><br></strong></span>This ethical theory involves a set of duties (moral principles) that an individual should fulfill in order to act morally.<br><br>
                    <strong>That is:</strong> some things are good, some things are bad, always.<br><br>
                    <strong>Examples:</strong> stealing is wrong, killing is wrong...<br><br>
                    <strong>Possible problems:</strong> how do we deal with a situation where two principles collide? Who chooses the set of principles?<br><br>
                    <strong>More info:</strong> <a href="https://plato.stanford.edu/entries/ethics-deontological/" target="_blank">[1]</a>,
                    <a href="https://www.britannica.com/topic/deontological-ethics" target="_blank">[2]</a>,
                    <a href="https://en.wikipedia.org/wiki/Deontology" target="_blank">[3]</a>
                </label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter8_it">
                <label>
                    <span style="font-size: 1.3em;"><strong>DEONTOLOGIA:<br><br></strong></span>Questa teoria etica coinvolge un insieme di doveri (principi morali) che un individuo dovrebbe rispettare per agire moralmente.<br><br>
                    <strong>Cioè:</strong> alcune cose sono buone, alcune cose sono cattive, sempre.<br><br>
                    <strong>Esempi:</strong> rubare è sbagliato, uccidere è sbagliato...<br><br>
                    <strong>Possibili problemi:</strong> come affrontiamo una situazione in cui due principi collidono? Chi sceglie l'insieme di principi?<br><br>
                    <strong>More info:</strong> <a href="https://plato.stanford.edu/entries/ethics-deontological/" target="_blank">[1]</a>,
                    <a href="https://www.britannica.com/topic/deontological-ethics" target="_blank">[2]</a>,
                    <a href="https://en.wikipedia.org/wiki/Deontology" target="_blank">[3]</a>
                </label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <!-- Intermediate Screen 2 -->
            <div class="question" data-id="inter9">
                <label>
                    <span style="font-size: 1.3em;"><strong>CONSEQUENTIALISM:<br><br></strong></span>This ethical theory wants that actions should be evaluated based on their consequences, specifically on the sum of all "good" produced by each of them.<br><br>
                    <strong>That is:</strong> good or wrong depends on the context and before each action one should try to predict the sum of all consequences (based on how you see this you could also consider very indirect consequences - perceived intention could be part of them).<br><br>
                    <strong>Examples:</strong> nuking Israel could save Palestine and thus be a good thing.<br><br>
                    <strong>Possible problems:</strong> how do we predict all of the consequences? What is "good" anyway?<br><br>
                    <strong>More info:</strong> <a href="https://plato.stanford.edu/entries/consequentialism/" target="_blank">[1]</a>,
                    <a href="https://iep.utm.edu/consequentialism-utilitarianism/" target="_blank">[2]</a>,
                    <a href="https://www.britannica.com/topic/consequentialism" target="_blank">[3]</a>,
                    <a href="https://en.wikipedia.org/wiki/Consequentialism" target="_blank">[4]</a>
                </label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter9_it">
                <label>
                    <span style="font-size: 1.3em;"><strong>CONSEQUENZIALISMO:<br><br></strong></span>Questa teoria etica vuole che le azioni siano valutate in base alle loro conseguenze, in particolare alla somma di tutto il "bene" prodotto da ciascuna di esse.<br><br>
                    <strong>Cioè:</strong> bene o male dipende dal contesto e prima di ogni azione si dovrebbe cercare di prevedere la somma di tutte le conseguenze (in base a come vedi questo potresti anche considerare conseguenze molto indirette - l'intenzione percepita potrebbe farne parte).<br><br>
                    <strong>Esempi:</strong> bombardare Israele potrebbe salvare la Palestina e quindi essere una cosa buona.<br><br>
                    <strong>Possibili problemi:</strong> come prevediamo tutte le conseguenze? Cos'è il "bene" comunque?<br><br>
                    <strong>More info:</strong> <a href="https://plato.stanford.edu/entries/consequentialism/" target="_blank">[1]</a>,
                    <a href="https://iep.utm.edu/consequentialism-utilitarianism/" target="_blank">[2]</a>,
                    <a href="https://www.britannica.com/topic/consequentialism" target="_blank">[3]</a>,
                    <a href="https://en.wikipedia.org/wiki/Consequentialism" target="_blank">[4]</a>
                </label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <!-- Intermediate Screen 3 -->
            <div class="question" data-id="inter10">
                <label>
                    <span style="font-size: 1.3em;"><strong>EGOISM:<br><br></strong></span>It's a specific consequentialist theory where "good" is calculated based only on the agent's payoff.<br><br>
                    <strong>That is:</strong> you do what brings you more of whatever you want.<br><br>
                    <strong>Examples:</strong> I eat the last piece of cake because I want it.<br><br>
                    <strong>Possible problems:</strong> you can figure these out.<br><br>
                    <strong>More info:</strong> <a href="https://plato.stanford.edu/entries/egoism/" target="_blank">[1]</a>,
                    <a href="https://en.wikipedia.org/wiki/Egoism" target="_blank">[2]</a>
                </label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter10_it">
                <label>
                    <span style="font-size: 1.3em;"><strong>EGOISMO:<br><br></strong></span>È una teoria consequenzialista specifica in cui il "bene" è calcolato solo in base al guadagno dell'agente.<br><br>
                    <strong>Cioè:</strong> fai ciò che ti porta più di ciò che vuoi.<br><br>
                    <strong>Esempi:</strong> mangio l'ultimo pezzo di torta perché lo voglio.<br><br>
                    <strong>Possibili problemi:</strong> puoi capirli.<br><br>
                    <strong>Maggiori informazioni:</strong> <a href="https://plato.stanford.edu/entries/egoism/" target="_blank">[1]</a>,
                    <a href="https://en.wikipedia.org/wiki/Egoism" target="_blank">[2]</a>
                </label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>

            <!-- Intermediate Screen 5 -->
             <div class="question" data-id="inter11">
                <label>Now back to the original question..</label>
                <md-filled-button type="button">Next</md-filled-button>
            </div>

            <div class="question" data-id="inter11_it">
                <label>Adesso torniamo alla domanda originale..</label>
                <md-filled-button type="button">Avanti</md-filled-button>
            </div>
        </form>

        <!-- Thank You Message -->
        <div class="thank-you">
            <p>Thank you for completing the survey!</p>
        </div>
        
        <!-- Loading Screen -->
        <div class="loading-screen">
            <md-circular-progress indeterminate></md-circular-progress>
            <p>Submitting your response...</p>
        </div>
    </div>

    <div style="position: fixed; bottom: 20px; text-align: center; z-index: 0">
        <a href="https://github.com/Piessa/MoralSurvey/blob/main/LICENSE.md" target="_blank"><img class="img" src="https://i.seadn.io/gae/KTMWrPShvGnUrsdK6DtFEbgUFTC0CX8ZOKPNAQ6UuamoDKtrNrMUYozamRN_NAGnwV1qhAkMbh3cXX9jmzhs7PNEvM9qjMYfWCTY-iU?auto=format&dpr=1&w=1000" alt="Logo" style="border-radius: 50%; object-fit: cover;"></a>
        <h2>Made by Piessa.</h2>
    </div>

    

    
    <script>
        const questions = document.querySelectorAll('.question');
        const form = document.getElementById('survey-form');
        const thankYou = document.querySelector('.thank-you');
        const loadingScreen = document.querySelector('.loading-screen');

        const answers = {};

        window.addEventListener('load', () => {
            loadingScreen.style.display = 'none';
        });

        const showQuestion = (id) => {
            questions.forEach((question) => {
                question.classList.remove('active');
                if (question.dataset.id === id) {
                    question.classList.add('active');
                }
            });
        };

        const collectAnswers = () => {
            return answers;
        };

        const submitSurvey = (answers) => {
            // Show loading screen
            form.style.display = 'none';
            loadingScreen.style.display = 'flex';

            if (test) {
                answers.lang = 'test';
            }
            const formData = new FormData();
            for (const key in answers) {
                formData.append(key, answers[key]);
            }

            fetch("https://script.google.com/macros/s/AKfycby-uj7A1-KNQmYPBeQp5kmaZ47nlfS_5M9TgsyU2oVI8M-G9Yx08caifUMiSUJgpGZg/exec", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(answers),  // Ensure data is sent as JSON
                mode: "no-cors"  // Prevents CORS errors
            })
            .then(() => {
                console.log("✅ Request sent successfully (no-cors, response not visible).");
                // Hide loading screen
                loadingScreen.style.display = 'none';

                // Hide form and show thank-you message
                thankYou.style.display = 'block';
            })

            .catch(error => {
                console.error("❌ Fetch error:", error);
            });
        };

        // Step 1: Define a configuration object for transitions
        const transitions = {
            lang: {
                en: 'inter0',
                it: 'inter0_it'
            },
            inter0: 'inter1',
            inter0_it: 'inter1_it',
            inter1: 'inter2',
            inter1_it: 'inter2_it',
            inter2: 'inter3',
            inter2_it: 'inter3_it',
            inter3: 'inter4',
            inter3_it: 'inter4_it',
            inter4: 'inter5',
            inter4_it: 'inter5_it',
            inter5: 'inter6',
            inter5_it: 'inter6_it',
            inter6: 'q1',
            inter6_it: 'q1_it',
            inter7: 'q3',
            inter7_it: 'q3_it',
            inter8: 'inter9',
            inter8_it: 'inter9_it',
            inter9: 'inter10',
            inter9_it: 'inter10_it',
            inter10: 'inter11',
            inter10_it: 'inter11_it'
        };

        document.querySelectorAll('.question md-filled-button').forEach((button) => {
            button.addEventListener('click', (event) => {
                const currentQuestion = event.target.closest('.question');
                const selectedValue = event.target.dataset.value;
                const currentId = currentQuestion.dataset.id;
                if (selectedValue) answers[currentId] = selectedValue;

                // Step 2: Use our transitions object for next screen if it exists
                const next = transitions[currentId]?.[selectedValue] || transitions[currentId];
                if (next) {
                    showQuestion(next);
                    return;
                }

                // Step 3: Keep other logic unchanged for final survey submission
                if (currentId === 'q1' || currentId === 'q1_it') {
                    if (selectedValue === 'yes') {
                        if (answers.lang === 'en') {
                            showQuestion('q2');
                        } else {
                            showQuestion('q2_it');
                        }
                    } else {
                        const answers = collectAnswers();
                        submitSurvey(answers);
                    }
                } else if (currentId === 'q2' || currentId === 'q2_it') {
                    if (selectedValue === 'yes') {
                        const answers = collectAnswers();
                        submitSurvey(answers);
                    } else {
                        if (answers.lang === 'en') {
                            showQuestion('inter7');
                        } else {
                            showQuestion('inter7_it');
                    }}
                } else if (currentId === 'q3' || currentId === 'q3_it') {
                    if (selectedValue === 'dunno') {
                        if (answers.lang === 'en') {
                            showQuestion('inter8');
                        } else {
                            showQuestion('inter8_it');
                        }
                    } else {
                        const answers = collectAnswers();
                        submitSurvey(answers);
                    }
                }
            });
        });
    </script>
</body>
</html>
